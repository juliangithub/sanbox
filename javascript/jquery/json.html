<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
<script type="text/javascript" src="jquery-1.12.4.min.js"></script>

<script language="javascript">
var obj_str = "obj_str :<br/>";
function traverse_json_obj(jsonObj){
	for(var p in jsonObj){
	//alert(p +  " " + typeof(jsonObj[p]) +":"+jsonObj[p]);

		if(typeof(jsonObj[p])== "object"){
			//alert(p +  " " + typeof(jsonObj[p]) +":"+jsonObj[p]);
			traverse_json_obj(jsonObj[p]);
		}
		else{
			//alert(p +  " " + typeof(jsonObj[p]) +":"+jsonObj[p]);
			obj_str += p +  " : " + jsonObj[p] +" : " +  typeof(jsonObj[p])+ ",<br/>";
		}
	}
}


function show_radio_sel(){
	//var radio_sel = $('input[id=sys_mode]').filter(':checked').val();
	var radio_sel = $('input[name="sys_mode"]').filter(':checked').val();
	alert(radio_sel);
}
function set_radio_sel(){
	var value = 0;
	$("#sys_mode" + value).attr('checked', 'checked');
}
function show_check_box(){


	//only v1.9.1 works well.
	//var wan_enable = ($("#wan_enable").attr("checked")?1:0);
	//all version of jquery work well .write as below
	var wan_enable = $('#wan_enable').is(':checked') ? 1 :0;
	alert(wan_enable);
}

function set_check_box(flag){
	$("#wan_enable").attr("checked", (flag == "1"?1:0));
}

function init(){
	alert("__init__");
	//$("#sys_mode").val(2)

	set_radio_sel();
	//$("input[name=sys_mode][value='2']").prop("checked",true);
	
	//var name="sys_mode"
	//var value = 2;
	//$("input[name='"+name+"'][value='"+value+"']").prop('checked', true);
	
	
	 
	//$(":radio[name=sys_mode]").val(2);
	
	 //$(":radio[name=sin]").val([useranswer]);

	 set_check_box("1");
}

$(document).ready(function() {

	alert("_document.ready");

	json_wl_tag();

	//split eg.
	var ip="192.168.88.254";
	var ip4 = ip.split(".")[3];
	alert("ipv4: " + ip4);

	var wl_band =122342234;
	var wl_channel = 2;
	var wl_adv_opower = "power";
	var wl_bandwidth = "band";
	
	alert($("#hlojqry").html());
	alert($("#hlo_div").html());
	alert($("#hlojqry").text());
	alert($("#hlo_div").text());
	
	alert($("#hlo_span").html());
	$("#hlo_span").html("22222222222222222");;
	
	
	alert($("input[name='wan_mask']").val());
	
var myObj = {
    "name":"网站",
    "num":3,
    "sites": [
        { "name":"Google", "info":[ "Android", "Google 搜索", "Google 翻译" ] },
        { "name":"Runoob", "info":[ "菜鸟教程", "菜鸟工具", "菜鸟微信" ] },
        { "name":"Taobao", "info":[ "淘宝", "网购" ] }
    ]
}

	var jsonObj = {
		"form":"wlan0_basic",
		"action":"set",
		"data": {
			"wl_band":wl_band,
			"wl_channel":wl_channel,
			"wl_adv_opower":wl_adv_opower,
			"wl_bandwidth":wl_bandwidth,
			"site3":"c.runoob.com"
		}
	};
	
	traverse_json_obj(jsonObj);
	$("#debug").html(obj_str);;
	/*
		var data = jsonObj.data;
		for(var p in data){
			alert(p +  " " + typeof(data[p]) +":"+data[p]);
		}
		alert("bbbbbbbbbbbbbbbbbbbbbbbbbbbbb");
		for(var p in jsonObj){
			alert(jsonObj.data.wl_band);
			alert(p +  " " + typeof(jsonObj[p]) +":"+jsonObj[p]);

			if(typeof(jsonObj[p])== "object"){
				for(var sub in jsonObj[p]){
					alert(sub +  " " + typeof(jsonObj[p][sub]) +":"+jsonObj[p][sub]);
				}
			}
			
		}
		*/
		

			/*
		var json = [
		{"id":"1","tagName":"apple"},
		{"id":"2","tagName":"orange"},
		{"id":"3","tagName":"banana"},
		{"id":"4","tagName":"watermelon"},
		{"id":"5","tagName":"pineapple"}
	];
	 
	$.each(json, function(idx, obj) {
		alert(obj.tagName);
	});
	*/
	
});

function json_wl_tag()
{

	var enable = 1;
	var ssid = "ssid"
	var hidden = 0;
	//var hidden = $('#hidden').is(':checked') ? 1 :0;	
	var channel = 6;
	var bindwidth = 0;
	var security = 0;
	var encrypt = 0;
	var psk = "psk";
	var power = 0
	
	var jsonObj = { 
				"enable":enable,
				"ssid":ssid,
				"hidden":hidden,
				"channel":channel,
				"bindwidth":bindwidth,
				"security":security,
				"encrypt":encrypt,
				"psk":psk,
				"power":power
	};

	//var jsonStr = JSON.stringify(jsonObjGet);
	//var wl_ifname = "wlan0";
	var wl_ifname = "wlan0-vap0";
	var jsonStr = "{"
	var i = 0;
	for(var p in jsonObj){
		if(i++ != 0 ){
			jsonStr += ","
		}
		jsonStr += ('"' + wl_ifname + p + '"'+  ":" +'"'+ jsonObj[p]+'"');
	}
	jsonStr += "}"

	$("#wl_json").html(jsonStr);
}


</script>
</head>
<body onload="init()">
<div class="dialog">
	<label><input type="radio" name="sys_mode" id="sys_mode0" value="0" onchange="show_radio_sel()"> route</label>
	<label><input type="radio" name="sys_mode" id="sys_mode1" value="1" onchange="show_radio_sel()"> bridge</label>
	<label><input type="radio" name="sys_mode" id="sys_mode2" value="2" onchange="show_radio_sel()"> repeater</label>
<dt >dt</dt>
<dl id="debug"></dl>
</div>

<div id="wl_json">
	
</div>
<div id ="hlo_div">
<strong id="hlojqry">hello jquery</strong>
</div>

<span style="width:160px;" id="hlo_span">
11111111111111
</span>
<br>
<input  type="text" name="wan_mask" value="255.255.0.0"/>

<input class="checkbox" type="checkbox" name="wan_enable" id="wan_enable"  onclick="show_check_box()">

</body>
</html>